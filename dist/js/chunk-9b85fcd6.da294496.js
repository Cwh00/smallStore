(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9b85fcd6"],{3767:function(t,e,c){},"3c85":function(t,e,c){"use strict";c("44e2")},"44e2":function(t,e,c){},"45f9":function(t,e,c){"use strict";var o=c("7a23"),n={key:0,class:"goodsList"},i={key:1};function a(t,e,c,a,u,l){var r=Object(o["H"])("goods-list-item");return c.goods.length>0?(Object(o["z"])(),Object(o["g"])("div",n,[(Object(o["z"])(!0),Object(o["g"])(o["a"],null,Object(o["F"])(c.goods,(function(t){return Object(o["z"])(),Object(o["g"])(r,{product:t,key:t},null,8,["product"])})),128))])):(Object(o["z"])(),Object(o["g"])("div",i,"没有相关图书"))}c("a4d3"),c("e01a");var u={class:"goods-item"},l={class:"goods-info"},r={class:"price"},d=Object(o["j"])("small",null,"¥",-1),s=Object(o["j"])("i",{class:"iconfont icon-shoucang"},null,-1);function j(t,e,c,n,i,a){var j=Object(o["I"])("lazy");return Object(o["z"])(),Object(o["g"])("div",u,[Object(o["j"])("a",{href:"#",onClick:e[1]||(e[1]=Object(o["T"])((function(t){return n.goDetail(c.product.id)}),["prevent"]))},[Object(o["S"])(Object(o["j"])("img",{alt:c.product.description},null,8,["alt"]),[[j,c.product.cover_url]])]),Object(o["j"])("div",l,[Object(o["j"])("p",null,Object(o["L"])(c.product.title),1),Object(o["j"])("span",r,[d,Object(o["i"])(Object(o["L"])(c.product.price+".00"),1)]),Object(o["j"])("span",null,[s,Object(o["i"])(Object(o["L"])(c.product.collects_count),1)])])])}var b=c("6c02"),O={name:"goodsListItem",props:{product:{type:Object,default:function(){return{}}}},setup:function(){var t=Object(b["d"])(),e=function(e){t.push({path:"/detail",query:{id:e}})};return{goDetail:e}}};c("3c85");O.render=j;var g=O,f={name:"goodsList",props:{goods:{type:Array,default:function(){return[]}}},components:{goodsListItem:g}};c("e48c");f.render=a;e["a"]=f},"6ab7":function(t,e,c){"use strict";c.r(e);c("a4d3"),c("e01a");var o=c("7a23"),n={class:"detail"},i=Object(o["i"])("商品详情"),a={class:"content"},u=Object(o["i"])("标签"),l=Object(o["i"])("标签");function r(t,e,c,r,d,s){var j=Object(o["H"])("top-nav"),b=Object(o["H"])("van-image"),O=Object(o["H"])("van-tag"),g=Object(o["H"])("van-card"),f=Object(o["H"])("van-action-bar-icon"),p=Object(o["H"])("van-action-bar-button"),v=Object(o["H"])("van-action-bar"),m=Object(o["H"])("van-tab"),k=Object(o["H"])("goodsList"),_=Object(o["H"])("van-tabs");return Object(o["z"])(),Object(o["g"])("div",n,[Object(o["j"])(j,null,{default:Object(o["R"])((function(){return[i]})),_:1}),Object(o["j"])("div",a,[Object(o["j"])(b,{width:"100%",height:"300",fit:"contain",src:t.goods.cover_url,"lazy-load":"",onClick:e[1]||(e[1]=function(e){return r.imgZoom(t.goods.cover_url)})},null,8,["src"]),Object(o["j"])(g,{num:t.goods.stock,price:t.goods.price+".00",desc:t.goods.description,title:t.goods.title},{tags:Object(o["R"])((function(){return[Object(o["j"])(O,{plain:"",type:"danger"},{default:Object(o["R"])((function(){return[u]})),_:1}),Object(o["j"])(O,{plain:"",type:"danger"},{default:Object(o["R"])((function(){return[l]})),_:1})]})),_:1},8,["num","price","desc","title"]),Object(o["j"])(v,null,{default:Object(o["R"])((function(){return[Object(o["j"])(f,{icon:"chat-o",text:"客服",color:"#ee0a24"}),r.isCollection?(Object(o["z"])(),Object(o["g"])(f,{key:0,icon:"star",text:"已收藏",color:"#ff5000",onClick:r.collection},null,8,["onClick"])):(Object(o["z"])(),Object(o["g"])(f,{key:1,icon:"star-o",text:"已收藏",color:"#ff5000",onClick:r.collection},null,8,["onClick"])),Object(o["j"])(p,{type:"warning",text:"加入购物车",onClick:r.addToCart},null,8,["onClick"]),Object(o["j"])(p,{type:"danger",text:"立即购买",onClick:r.toCart},null,8,["onClick"])]})),_:1}),Object(o["j"])(_,{modelValue:r.active,"onUpdate:modelValue":e[2]||(e[2]=function(t){return r.active=t})},{default:Object(o["R"])((function(){return[Object(o["j"])(m,{title:"概述"},{default:Object(o["R"])((function(){return[Object(o["j"])("div",{innerHTML:t.goods.details},null,8,["innerHTML"])]})),_:1}),Object(o["j"])(m,{title:"热评"},{default:Object(o["R"])((function(){return[(Object(o["z"])(!0),Object(o["g"])(o["a"],null,Object(o["F"])(t.goods.comments,(function(t){return Object(o["z"])(),Object(o["g"])("div",{key:t})})),128))]})),_:1}),Object(o["j"])(m,{title:"相关图书"},{default:Object(o["R"])((function(){return[Object(o["j"])(k,{goods:t.like_goods},null,8,["goods"])]})),_:1})]})),_:1},8,["modelValue"])])])}var d=c("5530"),s=(c("4662"),c("28a2")),j=(c("e7e5"),c("d399")),b=c("45f9"),O=c("6c02"),g=c("2cec"),f=c("1bab");function p(t){return Object(f["a"])({url:"api/goods/"+t})}var v=c("8b28"),m=c("748a"),k=c("5502"),_={name:"Detail",components:{topNav:g["a"],goodsList:b["a"]},setup:function(){var t=Object(o["E"])(!1),e=Object(o["E"])(2),c=Object(o["D"])({good_id:"",goods:{},like_goods:[]}),n=Object(O["c"])(),i=Object(O["d"])(),a=Object(k["b"])(),u=function(){c.good_id=n.query.id,p(c.good_id).then((function(e){console.log(e),t.value=1==e.goods.is_collect,c.goods=e.goods,e.like_goods.length%2==0?c.like_goods=e.like_goods:(c.like_goods=e.like_goods,c.like_goods.pop())}))};function l(t,e){var c=null;return function(){null!=c&&clearTimeout(c),c=setTimeout((function(){t()}),e)}}var r=l((function(){Object(m["b"])(c.good_id).then((function(e){201==e.status?(Object(j["a"])("收藏成功"),t.value=!0):204==e.status&&(Object(j["a"])("取消成功"),t.value=!1)}))}),300),b=function(t){Object(s["a"])({images:[t],closeable:!0})},g=l((function(){Object(v["a"])({goods_id:c.goods.id,num:1}).then((function(t){201!=t.status&&204!=t.status||(Object(j["a"])("添加成功"),a.dispatch("updateCartCount"))}))}),500),f=l((function(){Object(v["a"])({goods_id:c.goods.id,num:1}).then((function(t){201!=t.status&&204!=t.status||(i.push({path:"/shopCart"}),a.dispatch("updateCartCount"))}))}),500);return Object(o["w"])((function(){j["a"].loading({message:"正在加载"}),u(),j["a"].clear()})),Object(o["P"])((function(){return n.query.id}),(function(){"/detail"==n.path&&u()})),Object(d["a"])(Object(d["a"])({},Object(o["M"])(c)),{},{active:e,imgZoom:b,addToCart:g,toCart:f,isCollection:t,collection:r})}};c("d07f");_.render=r;e["default"]=_},ade3:function(t,e,c){},d07f:function(t,e,c){"use strict";c("3767")},e48c:function(t,e,c){"use strict";c("ade3")}}]);
//# sourceMappingURL=chunk-9b85fcd6.da294496.js.map