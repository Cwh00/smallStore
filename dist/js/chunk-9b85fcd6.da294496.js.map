{"version":3,"sources":["webpack:///./src/components/content/goods/goodsListItem.vue?fd66","webpack:///./src/components/content/goods/goodsList.vue","webpack:///./src/components/content/goods/goodsListItem.vue","webpack:///./src/components/content/goods/goodsListItem.vue?8a63","webpack:///./src/components/content/goods/goodsList.vue?200c","webpack:///./src/views/detail/Detail.vue","webpack:///./src/network/detail.js","webpack:///./src/views/detail/Detail.vue?a2c9","webpack:///./src/views/detail/Detail.vue?5531","webpack:///./src/components/content/goods/goodsList.vue?6c56"],"names":["class","goods","length","item","product","key","href","goDetail","id","alt","description","cover_url","title","price","collects_count","name","props","type","Object","default","setup","router","push","path","query","render","Array","components","goodsListItem","width","height","fit","src","lazy-load","imgZoom","num","stock","desc","tags","plain","icon","text","color","isCollection","collection","addToCart","toCart","active","details","comments","like_goods","getGoodsDetail","good_id","request","url","topNav","goodsList","goodDetails","route","store","init","then","res","console","log","value","is_collect","pop","debounce","func","delay","t","clearTimeout","setTimeout","status","img_url","images","closeable","goods_id","dispatch","loading","message","clear"],"mappings":"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","file":"js/chunk-9b85fcd6.da294496.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./goodsListItem.vue?vue&type=style&index=0&id=2b37adc3&lang=scss\"","<template>\r\n    <div v-if=\"goods.length > 0\" class=\"goodsList\">\r\n        <goods-list-item  v-for=\"item in goods\" :product=\"item\" :key=\"item\"></goods-list-item>\r\n    </div>\r\n    <div v-else >没有相关图书</div>\r\n</template>\r\n<script>\r\n    import goodsListItem from './goodsListItem';\r\n    export default {\r\n        name: 'goodsList',\r\n        props: {\r\n            goods: {\r\n                type: Array,\r\n                default() {\r\n                    return [];\r\n                }\r\n            }\r\n        },\r\n        components: {\r\n            goodsListItem\r\n        }\r\n    }\r\n</script>\r\n<style lang=\"scss\">\r\n    .goodsList {\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        justify-content: space-around;\r\n    }\r\n\r\n</style>","<template>\r\n    <div class=\"goods-item\">\r\n        <a href=\"#\" @click.prevent=\"goDetail(product.id)\">\r\n            <img v-lazy=\"product.cover_url\" :alt=\"product.description\">\r\n        </a>\r\n        <div class=\"goods-info\">\r\n            <p>{{product.title}}</p>\r\n            <span class=\"price\"><small>¥</small>{{product.price+'.00'}}</span>\r\n            <span><i class=\"iconfont icon-shoucang\"></i>{{product.collects_count}}</span>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n    import { useRouter } from 'vue-router';\r\n    export default {\r\n        name: 'goodsListItem',\r\n        props: {\r\n            product: {\r\n                type: Object,\r\n                default() {\r\n                    return {};\r\n                }\r\n            }\r\n        },\r\n        setup() {\r\n            const router = useRouter();\r\n            const goDetail = (id)=>{\r\n                router.push({path:'/detail',query:{id}})\r\n            }\r\n            return {\r\n                goDetail\r\n            }\r\n        }\r\n    }\r\n</script>\r\n<style lang=\"scss\">\r\n    .goods-item {\r\n        width: 40%;\r\n        margin: 10px 0;\r\n        a {\r\n            display: block;\r\n            width: 100%;\r\n            img {\r\n                width: 100%;\r\n            }\r\n        }\r\n        .goods-info{\r\n            width: 100%;\r\n            span {\r\n                margin: 0 5px;\r\n            }\r\n            .price {\r\n                color: red;\r\n            }\r\n        }\r\n    }\r\n\r\n</style>","import { render } from \"./goodsListItem.vue?vue&type=template&id=2b37adc3\"\nimport script from \"./goodsListItem.vue?vue&type=script&lang=js\"\nexport * from \"./goodsListItem.vue?vue&type=script&lang=js\"\n\nimport \"./goodsListItem.vue?vue&type=style&index=0&id=2b37adc3&lang=scss\"\nscript.render = render\n\nexport default script","import { render } from \"./goodsList.vue?vue&type=template&id=54b352fa\"\nimport script from \"./goodsList.vue?vue&type=script&lang=js\"\nexport * from \"./goodsList.vue?vue&type=script&lang=js\"\n\nimport \"./goodsList.vue?vue&type=style&index=0&id=54b352fa&lang=scss\"\nscript.render = render\n\nexport default script","<template>\r\n    <div class=\"detail\">\r\n        <top-nav>\r\n            <template v-slot:default>商品详情</template>\r\n        </top-nav>\r\n        <div class=\"content\">\r\n            <van-image\r\n            width=\"100%\"\r\n            height=\"300\"\r\n            fit=\"contain\"\r\n            :src=\"goods.cover_url\"\r\n            lazy-load\r\n            @click=\"imgZoom(goods.cover_url)\"\r\n            />\r\n            <van-card\r\n            :num=\"goods.stock\"\r\n            :price=\"goods.price+'.00'\"\r\n            :desc=\"goods.description\"\r\n            :title=\"goods.title\"\r\n            >\r\n                <template #tags>\r\n                    <van-tag plain type=\"danger\">标签</van-tag>\r\n                    <van-tag plain type=\"danger\">标签</van-tag>\r\n                </template>\r\n            </van-card>\r\n            <van-action-bar>\r\n                <van-action-bar-icon icon=\"chat-o\" text=\"客服\" color=\"#ee0a24\" />\r\n                <van-action-bar-icon v-if=\"isCollection\" icon=\"star\" text=\"已收藏\" color=\"#ff5000\" @click=\"collection\"/>\r\n                <van-action-bar-icon v-else icon=\"star-o\" text=\"已收藏\" color=\"#ff5000\" @click=\"collection\"/>\r\n                <van-action-bar-button type=\"warning\" text=\"加入购物车\" @click=\"addToCart\"/>\r\n                <van-action-bar-button type=\"danger\" text=\"立即购买\" @click=\"toCart\"/>\r\n            </van-action-bar>\r\n            <van-tabs v-model=\"active\">\r\n                <van-tab title=\"概述\" >\r\n                    <div v-html=\"goods.details\"></div>\r\n                </van-tab>\r\n                <van-tab title=\"热评\">\r\n                    <div v-for=\"item in goods.comments\" :key=\"item\"></div>\r\n                </van-tab>\r\n                <van-tab title=\"相关图书\">\r\n                    <goodsList :goods=\"like_goods\"></goodsList>\r\n                </van-tab>\r\n            </van-tabs>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n    import { ImagePreview,Toast } from 'vant';\r\n    import goodsList from 'components/content/goods/goodsList'\r\n    import { ref,onMounted,toRefs,reactive, watch } from 'vue';\r\n    import { useRoute, useRouter } from 'vue-router';\r\n    import topNav from 'components/content/topNav';\r\n    import { getGoodsDetail } from 'network/detail';\r\n    import { addCart } from 'network/shopingCart';\r\n    import { updateCollection } from 'network/collection'\r\n    import { useStore } from 'vuex';\r\n    export default {\r\n        name: 'Detail',\r\n        components: {\r\n            topNav,\r\n            goodsList,\r\n        },\r\n        setup() {\r\n            let isCollection = ref(false);\r\n            //选项卡索引\r\n            let active = ref(2);\r\n            //商品详情初始化\r\n            let goodDetails = reactive({\r\n                good_id: '',\r\n                goods:{},\r\n                like_goods:[],\r\n            })\r\n            const route = useRoute();\r\n            const router = useRouter();\r\n            const store = useStore();\r\n            //数据初始化\r\n            const init = ()=>{\r\n                goodDetails.good_id = route.query.id\r\n                getGoodsDetail(goodDetails.good_id).then(res=>{\r\n                    console.log(res);\r\n                    //判断是否、更换图标\r\n                    isCollection.value = res.goods.is_collect == 1 ? true : false\r\n                    \r\n                    goodDetails.goods = res.goods\r\n                    //相关图书商品列表长度是基数时变成偶数\r\n                    if(res.like_goods.length % 2 == 0){\r\n                        goodDetails.like_goods = res.like_goods\r\n                    }else{\r\n                        goodDetails.like_goods = res.like_goods\r\n                        goodDetails.like_goods.pop()\r\n                    }\r\n                    \r\n                })\r\n            }\r\n            \r\n            //防抖动函数，参数（业务逻辑函数，延时）\r\n            function debounce(func,delay) {\r\n                let t = null;\r\n                return ()=>{\r\n                    if(t != null){\r\n                        clearTimeout(t)\r\n                    }\r\n                    t = setTimeout(()=>{\r\n                        func();\r\n                    },delay)\r\n                }\r\n            }\r\n\r\n            //////点击事件调用防抖动函数//////\r\n\r\n            //收藏点击更新\r\n            const collection = debounce(()=>{\r\n                updateCollection(goodDetails.good_id).then(res=>{\r\n                    if(res.status == 201){\r\n                        Toast('收藏成功');\r\n                        isCollection.value = true\r\n                    }else if(res.status ==204){\r\n                        Toast('取消成功')\r\n                        isCollection.value = false\r\n                    }\r\n                })\r\n            },300)\r\n            const imgZoom = (img_url)=>{\r\n                ImagePreview({images: [img_url],closeable: true})\r\n            }\r\n            //点击加入购物车\r\n            const addToCart = debounce(()=>{\r\n                addCart({goods_id: goodDetails.goods.id,num: 1}).then(res=>{\r\n                    if(res.status == 201 || res.status == 204) {\r\n                        Toast('添加成功');\r\n                        store.dispatch('updateCartCount')\r\n                    }\r\n                });\r\n            },500)\r\n            \r\n            //点击立即购买\r\n            const toCart = debounce(()=>{\r\n                addCart({goods_id: goodDetails.goods.id,num: 1}).then(res=>{\r\n                    if(res.status == 201 || res.status == 204) {\r\n                        router.push({path: '/shopCart'})\r\n                        store.dispatch('updateCartCount')\r\n                    }\r\n                });\r\n            },500)\r\n            \r\n            onMounted(()=>{\r\n                Toast.loading({message: '正在加载'})\r\n                init();\r\n                Toast.clear();\r\n            })\r\n            //监听路由id更新页面\r\n            watch(()=>route.query.id,()=>{\r\n                //只有在详情页面id变化才重新初始化数据\r\n                if(route.path == '/detail'){\r\n                    init();\r\n                }\r\n            });\r\n\r\n            return {\r\n                ...toRefs(goodDetails),\r\n                active,\r\n                imgZoom,\r\n                addToCart,\r\n                toCart,\r\n                isCollection,\r\n                collection\r\n            }\r\n        }\r\n    }\r\n</script>\r\n<style lang=\"scss\">\r\n    .detail {\r\n\r\n        .content {\r\n            margin-top: var(--content-margin-top);\r\n            margin-bottom: var(--content-margin-bottom);\r\n                .van-action-bar {\r\n                    z-index: 10;\r\n                }\r\n                .van-card__content {\r\n                    font-size: 14px;\r\n                    align-items: flex-start;\r\n                    div {\r\n                        text-align: left !important;\r\n                        .van-card__price {\r\n                            color: red;\r\n                        }\r\n                        .van-card__title {\r\n                            font-size: 16px;\r\n                            max-height: none;\r\n                            overflow: none;\r\n                            margin: 5px;\r\n                        } \r\n                    }\r\n                    .van-card__bottom {\r\n                            width: 100%;\r\n                            display :flex;\r\n                            justify-content: space-between;\r\n                        }\r\n                }\r\n                .van-tabs__content {\r\n                        img {\r\n                            max-width: 100%;\r\n                        }\r\n                }\r\n            \r\n        }\r\n    }\r\n</style>","import { request } from './request';\r\n\r\nexport function getGoodsDetail(good_id) {\r\n    return request({\r\n        url: 'api/goods/'+good_id\r\n    })\r\n}","import { render } from \"./Detail.vue?vue&type=template&id=dc4d8aaa\"\nimport script from \"./Detail.vue?vue&type=script&lang=js\"\nexport * from \"./Detail.vue?vue&type=script&lang=js\"\n\nimport \"./Detail.vue?vue&type=style&index=0&id=dc4d8aaa&lang=scss\"\nscript.render = render\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Detail.vue?vue&type=style&index=0&id=dc4d8aaa&lang=scss\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./goodsList.vue?vue&type=style&index=0&id=54b352fa&lang=scss\""],"sourceRoot":""}